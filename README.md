# OrgToInvoice


A command line utility to convert [Org](https://orgmode.org) files to customizable [LaTeX](https://www.latex-project.org) invoice and work logs. This project is currently hosted on [GitLab](https://gitlab.com/samwise_i/orgtoinvoice).

All time entries from the **_.org_** file shall have the following format:

    CLOCK: [2017-02-14 Tue 13:16]--[2017-02-14 Tue 15:22] =>  2:06
    ...
    CLOCK: [2017-02-14 Tue 17:14]--[2017-02-14 Tue 18:15] =>  1:01
    ` Worked with Elon on creating a release candidate and running the torture test.

The **CLOCK:** lines are auto generated by org-mode using the built-in clock functionality. There may be one or more of these clock lines per comment describing what was done for that period(s). Note, comment lines must start with **`** and follow one or more valid clock lines.

Work days can be entered in any order since they are sorted when read.

All comments are required to start with one of the following:

    `   Normal work
    ~   Meeting (Not implemented)
    ^   Travel  (Not implemented)

An **_.ini_** file must be created containing provider and client information:

    [PROVIDER]
        Company = "Awesome Engineering, Inc."
        Address1 = "10 Where stuff gets done circle"
        City = "TheCity"
        State =  "CA"
        ZIP =  "94103"
        Phone = "415.555.1212"

    [CLIENT]
        Company = "ACME Systems, Inc."
        Address1 = "18 Cool Project Street"
        City = "Utopia"
        State =  "TX"
        ZIP =  "78653"
        Phone = "520.555.1212"
        PO = "12345"
        Rate = "1000.00"

Typical usage :

    ./timeproc --rate 350.00 --invoice 42 --month 2 --period 1 --time <PathToOrgFile/timedata.org> --year 2021 --config <PathtoConfigFile/client.ini>

This produces two files:

    customer-0042.Feb-1-14-2021.tex
    customer-0042.Feb-1-14-2021.log.tex
    
# Converting to PDF

The invoice and log files are in LaTeX format and will likely need to be converted to pdf or some other document format. On Linux systems the **_texi2pdf_** utility from [texinfo](https://www.gnu.org/software/texinfo/) can be used to generate the pdfs.

    texi2pdf customer-0042.Feb-1-14-2021.log.tex

A [Ledger](https://plaintextaccounting.org) file is also produced for use with the Ledger plain text accounting system.

    customer-0042.Feb-1-14-2021.leg

# Examples

The **_example-data_** directory contains an example run. The reports were generated by running **_test.sh_**, and then converting the **_.tex_** files to pdfs using **_texi2pdf_**.

# Building

OrgToInvoice has the following dependencies:
- A C++20 compatible compiler either GCC 11 or Clang 13 or newer
- [CMake](https://cmake.org/) version 3.15 or newer. 

To build:

    git clone git@gitlab.com:samwise_i/orgtoinvoice.git
    cd orgtoinvoice
    mkdir build
    cd build
    cmake ..
    make

The build artifact will be placed in the project local **_bin/_** directory.

# License

This project is licensed under the [GNU General Public License v3.0](https://www.gnu.org/licenses/).

